//////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////BEFORE YOU ADD TO THIS FILE////////////////////////////////////////////////////// /
////////////////////////PLEASE CTRL + K, CTRL + 0 TO CLOSE ALL OF THIS shod ///////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////


// KMT UNIT ///////////////////////////////////////////////////////////////////////////////////////
const flashcardsunit1 = [
  { "front": "What does the Kinetic Molecular Theory explain?", "back": "The behavior of particles in gases", "unit": "6" },
  { "front": "According to KMT, how are gas particles in motion?", "back": "They are in constant, random motion", "unit": "6" },
  { "front": "What does KMT assume about the size of gas particles?", "back": "They are so small compared to the space between them that their own volume is negligible", "unit": "6" },
  { "front": "What type of collisions do gas particles have according to KMT?", "back": "Elastic collisions (no energy is lost)", "unit": "6" },
  { "front": "What does KMT say about the forces between gas particles?", "back": "There are no attractive or repulsive forces between them", "unit": "6" },
  { "front": "According to KMT, what determines the temperature of a gas?", "back": "The average kinetic energy of its particles", "unit": "6" },
  { "front": "What happens to particle speed when temperature increases?", "back": "Particle speed increases", "unit": "6" },
  { "front": "What happens to particle speed when temperature decreases?", "back": "Particle speed decreases", "unit": "6" },
  { "front": "According to KMT, why do gases fill their containers?", "back": "Particles move freely and spread out to fill the available space", "unit": "6" },
  { "front": "In KMT, what does 'elastic collision' mean?", "back": "Particles bounce off each other without losing total kinetic energy", "unit": "6" },
  { "front": "How does KMT explain gas pressure?", "back": "Gas particles colliding with the walls of the container", "unit": "6" },
  { "front": "If temperature doubles, what happens to the average kinetic energy?", "back": "It also doubles", "unit": "6" },
  { "front": "How does KMT explain diffusion in gases?", "back": "Particles move randomly and spread out evenly over time", "unit": "6" },
  { "front": "How does particle mass affect speed in KMT?", "back": "Lighter particles move faster at the same temperature", "unit": "6" },
  { "front": "What does KMT say about the motion of particles in a vacuum?", "back": "They move in straight lines until they collide", "unit": "6" },
  { "front": "What happens to particle motion if volume is reduced?", "back": "Collisions with container walls become more frequent, increasing pressure", "unit": "6" },
  { "front": "How does KMT relate temperature to pressure?", "back": "Higher temperature → faster particles → more collisions → higher pressure", "unit": "6" },
  { "front": "Why do gases have low density according to KMT?", "back": "Particles are far apart compared to their size", "unit": "6" },
  { "front": "What is the relationship between kinetic energy and absolute temperature?", "back": "They are directly proportional", "unit": "6" },
  { "front": "What does KMT assume about the duration of collisions?", "back": "Collisions are instantaneous", "unit": "6" },
  { "front": "Why are real gases not ideal?", "back": "Real gases have intermolecular forces and particles with actual volume", "unit": "6" },
  { "front": "Under what conditions do gases behave most ideally?", "back": "High temperature and low pressure", "unit": "6" },
  { "front": "According to KMT, what happens when gas particles collide with each other?", "back": "They bounce off in new directions without losing total energy", "unit": "6" },
  { "front": "What happens to the motion of gas particles as they approach absolute zero?", "back": "They slow down and approach no motion", "unit": "6" },
  { "front": "How does KMT describe gas particle paths between collisions?", "back": "They travel in straight lines", "unit": "6" },
]
///////////////////////////////////////////////////////////////////////////////////

const flashcardsunit2 = [  
  // Unit 2: Atomic Theory
  { front: "What is an atom?", back: "The smallest unit of matter that retains the properties of an element", unit: "Atomic Theory" },
  { front: "Who proposed the first model of the atom?", back: "John Dalton", unit: "Atomic Theory" },
  { front: "What is Dalton's Atomic Theory?", back: "Atoms are indivisible, identical for each element, and combine in whole number ratios.", unit: "Atomic Theory" },
  { front: "What is a proton?", back: "A positively charged particle in the nucleus of an atom", unit: "Atomic Theory" },
  { front: "What is a neutron?", back: "A neutral particle in the nucleus of an atom", unit: "Atomic Theory" },
  { front: "What is an electron?", back: "A negatively charged particle that orbits the nucleus", unit: "Atomic Theory" },
  { front: "Who discovered the electron?", back: "J.J. Thomson", unit: "Atomic Theory" },
  { front: "What is Thomson's model of the atom?", back: "The 'plum pudding' model with electrons in a positively charged sphere", unit: "Atomic Theory" },
  { front: "Who discovered the nucleus?", back: "Ernest Rutherford", unit: "Atomic Theory" },
  { front: "What is Rutherford's atomic model?", back: "Most of the atom is empty space with a dense positive nucleus", unit: "Atomic Theory" },
  { front: "What is Bohr's model?", back: "Electrons orbit the nucleus in fixed shells/energy levels", unit: "Atomic Theory" },
  { front: "What is an isotope?", back: "Atoms of the same element with different numbers of neutrons", unit: "Atomic Theory" },
  { front: "What is an ion?", back: "An atom that has gained or lost electrons, giving it a charge", unit: "Atomic Theory" },
  { front: "What is the charge of a proton?", back: "+1", unit: "Atomic Theory" },
  { front: "What is the charge of an electron?", back: "-1", unit: "Atomic Theory" },
  { front: "What is the charge of a neutron?", back: "0 (neutral)", unit: "Atomic Theory" },
  { front: "What is the nucleus?", back: "The center of an atom containing protons and neutrons", unit: "Atomic Theory" },
  { front: "Where are electrons assumed to be found?", back: "Regions circling around the nucleus called shells/energy levels", unit: "Atomic Theory" },
  { front: "What determines an atom's chemical properties?", back: "The number and arrangement of electrons", unit: "Atomic Theory" },
]

const flashcardsunit3 = [
    // Unit 3: Atomic Structure
  { front: "What is a valence electron?", back: "An electron in the outermost shell", unit: "3" },
  { front: "What is in the nucleus?", back: "Protons and neutrons", unit: "Atomic Structure" },
  { front: "What surrounds the nucleus?", back: "Electrons", unit: "Atomic Structure" },
  { front: "What is the mass of a proton?", back: "Approximately 1 atomic mass unit (amu)", unit: "Atomic Structure" },
  { front: "What is the mass of a neutron?", back: "Approximately 1 atomic mass unit (amu)", unit: "Atomic Structure" },
  { front: "What is an electron shell?", back: "A fixed region where electrons orbit the nucleus", unit: "Atomic Structure" },
  { front: "Why are valence electrons important?", back: "They determine chemical reactivity", unit: "Atomic Structure" },
  { front: "An atom has 12 electrons. How are they arranged in shells?", back: "2, 8, 2", unit: "Atomic Structure" },
  { front: "An atom has 10 electrons. How many valence electrons?", back: "8", unit: "Atomic Structure" },
  { front: "An atom has 9 protons, 10 neutrons. Identify isotope.", back: "Fluorine-19", unit: "Atomic Structure" },
  { front: "An atom has 6 protons and 6 neutrons. What is its mass number?", back: "12", unit: "Atomic Structure" },
  { front: "An atom has 11 protons and 12 neutrons. What is its mass number?", back: "23", unit: "Atomic Structure" },
  { front: "An atom has 17 protons. What is its mass number?", back: "34", unit: "Atomic Structure" },
  { front: "An ion has 15 protons and 20 electrons. How many neutrons?", back: "15", unit: "Atomic Structure" },
  { front: "Magnesium has 12 protons. How many electrons in the second shell?", back: "8", unit: "Atomic Structure" },
  { front: "Fluorine has 9 protons. How many electrons in total?", back: "9", unit: "Atomic Structure" },
  { front: "Calcium has 20 protons. How many neutrons if its mass number is 40?", back: "20", unit: "Atomic Structure" },
  { front: "Carbon-14 has 6 protons. How many neutrons?", back: "8", unit: "Atomic Structure" },


]

const flashcardsunit4 = [
  // Unit 4: Periodic Table
  { front: "Who created the periodic table?", back: "Dmitri Mendeleev", unit: "2" },
  { front: "What does a group (column) in the periodic table show?", back: "Elements with similar properties", unit: "2" },
  { front: "What does a period (row) in the periodic table show?", back: "Same number of electron shells", unit: "2" },
  { front: "What are Group 1 elements called?", back: "Alkali metals", unit: "2" },
  { front: "What are Group 17 elements called?", back: "Halogens", unit: "2" },
  { front: "What are Group 18 elements called?", back: "Noble gases", unit: "2" },
  { front: "Are metals on the left or right of the periodic table?", back: "Left", unit: "2" },
  { front: "Are nonmetals on the left or right of the periodic table?", back: "Right", unit: "2" },
  { front: "What element has atomic number 1?", back: "Hydrogen", unit: "2" },
  { front: "Which two elements are liquid at exactly room temperature?", back: "Bromine and Mercury", unit: "2" },
  { front: "What is the atomic number?", back: "The number of protons in an atom's nucleus", unit: "Atomic Theory" },
  { front: "What is the mass number?", back: "The sum of protons and neutrons in an atom", unit: "Atomic Theory" },
]


const flashcardsunit5 = [
  // Unit 5: Bonding
  { front: "What is an ionic bond?", back: "Transfer of electrons between atoms", unit: "3" },
  { front: "What is a covalent bond?", back: "Sharing of electrons between atoms", unit: "3" },
  { front: "What types of elements form ionic bonds?", back: "Metals and nonmetals", unit: "3" },
  { front: "What types of elements form covalent bonds?", back: "Nonmetals and nonmetals", unit: "3" },
  { front: "What is the chemical formula for water?", back: "H₂O", unit: "3" },
  { front: "What is the chemical formula for table salt?", back: "NaCl", unit: "3" },
  { front: "Why do atoms form bonds?", back: "To become more stable", unit: "3" },
  { front: "What is a valence electron?", back: "An electron in the outermost shell", unit: "3" },
  { front: "What is a cation?", back: "A positively charged ion", unit: "Bonding" },
  { front: "What is an anion?", back: "A negatively charged ion", unit: "Bonding" },
  { front: "Sodium (Na) loses 1 electron to chlorine (Cl). What type of bond forms?", back: "Ionic bond", unit: "Bonding" },
  { front: "Oxygen shares 2 electrons with another oxygen atom. What type of bond is this?", back: "Covalent bond", unit: "Bonding" },
]

const flashcardsunit6 = [
  // Unit 6: States of Matter
  { front: "What are the three main states of matter?", back: "Solid, liquid, and gas", unit: "5" },
  { front: "What state of matter has a fixed shape and volume?", back: "Solid", unit: "5" },
  { front: "What state of matter has a fixed volume but no fixed shape?", back: "Liquid", unit: "5" },
  { front: "What state of matter has no fixed shape or volume?", back: "Gas", unit: "5" },
  { front: "What is the process of solid to liquid called?", back: "Melting", unit: "5" },
  { front: "What is the process of liquid to gas called?", back: "Evaporation", unit: "5" },
  { front: "What is the process of gas to liquid called?", back: "Condensation", unit: "5" },
  { front: "What is the process of liquid to solid called?", back: "Freezing", unit: "5" },
  { front: "What is the process of solid to gas called?", back: "Sublimation", unit: "5" },
  { front: "What causes changes in states of matter?", back: "Adding or removing heat", unit: "5" },
  { front: "What is a physical change?", back: "A change in state or form without changing chemical composition", unit: "Mixtures & Solutions" },
  { front: "What is a chemical change?", back: "A change in chemical composition and properties, not easily reversible", unit: "Mixtures & Solutions" },
]


const flashcardsunit7 = [
  // Unit 7: Reactions
  { front: "What is a chemical reaction?", back: "A process that changes substances into new ones", unit: "4" },
  { front: "What are the signs of a chemical reaction?", back: "Color change, gas, temperature change, precipitate", unit: "4" },
  { front: "What is a reactant?", back: "A substance that starts a chemical reaction", unit: "4" },
  { front: "What is a product?", back: "A substance formed in a chemical reaction", unit: "4" },
  { front: "What is the law of conservation of mass?", back: "Mass is not created or destroyed in a reaction", unit: "4" },
  { front: "What is a balanced equation?", back: "Same number of atoms on both sides of the equation", unit: "4" },
  { front: "What is a catalyst?", back: "A substance that speeds up a reaction without being used up", unit: "4" },
  { front: "What is a chemical equation?", back: "A symbolic representation of a chemical reaction", unit: "4" },
  { front: "What is a decomposition reaction?", back: "A reaction where one compound breaks into two or more simpler substances", unit: "Chemical Reactions" },
  { front: "What is a synthesis reaction?", back: "A reaction where two or more substances combine to form one compound", unit: "Chemical Reactions" },
  { front: "What is a single replacement reaction?", back: "A reaction where one element replaces another in a compound", unit: "Chemical Reactions" },
  { front: "What is a double replacement reaction?", back: "A reaction where parts of two compounds swap places", unit: "Chemical Reactions" },
  { front: "What is a combustion reaction?", back: "A reaction where a substance reacts with oxygen, producing heat and often light", unit: "Chemical Reactions" },
  { front: "A + B -> AB", back: "Synthesis reaction", unit: "Chemical Reactions" },
  { front: "A + BC -> AC + B", back: "Single replacement/displacement", unit: "Chemical Reactions" },
  { front: "AB + CD -> AC + BD", back: "Double replacement/displacement", unit: "Chemical Reactions" },
  { front: "CₓHᵧ + O₂ -> CO₂ + H₂O", back: "Combustion reaction", unit: "Chemical Reactions" },
  { front: "AB -> A + B", back: "Decomposition reaction", unit: "Chemical Reactions" },
]



const flashcardsunit8 = [
  // Unit 8: Mixtures and Solutions
  { front: "What mixture looks the same throughout?", back: "A homogenous mixture", unit: "8" },
  { front: "What mixture has visible, distinguishable parts?", back: "A heterogenous mixture", unit: "8" },
  { front: "Salt water is what type of mixture?", back: "A homogenous mixture/solution", unit: "8" },
  { front: "Oil and water is what type of mixture?", back: "A heterogenous mixture", unit: "8" },
  { front: "____ dissolves ____.", back: "Like dissolves like", unit: "8" },
  { front: "What is a mixture?", back: "A combination of two or more substances that are not chemically bonded", unit: "Mixtures & Solutions" },
  { front: "What is a solution?", back: "A homogeneous mixture of two or more substances", unit: "Mixtures & Solutions" },
  { front: "What is the solvent?", back: "The substance that dissolves another substance", unit: "Mixtures & Solutions" },
  { front: "What is the solute?", back: "The substance that is dissolved in a solvent", unit: "Mixtures & Solutions" },
  { front: "What does 'homogeneous' mean?", back: "Uniform composition throughout", unit: "Mixtures & Solutions" },
  { front: "What does 'heterogeneous' mean?", back: "Composition is not uniform; different parts are visible", unit: "Mixtures & Solutions" },
  { front: "Example of a homogeneous mixture?", back: "Salt water", unit: "Mixtures & Solutions" },
  { front: "Example of a heterogeneous mixture?", back: "Sand in water", unit: "Mixtures & Solutions" },
  { front: "What is a suspension?", back: "A heterogeneous mixture where particles settle over time", unit: "Mixtures & Solutions" },
  { front: "What is filtration used for?", back: "Separating solid particles from a liquid in a heterogeneous mixture", unit: "Mixtures & Solutions" },
  { front: "What is evaporation used for?", back: "Separating a dissolved solid from a liquid", unit: "Mixtures & Solutions" },
  { front: "What is distillation?", back: "Separating substances based on different boiling points", unit: "Mixtures & Solutions" },
  { front: "What is a physical change?", back: "A change in state or form without changing chemical composition", unit: "Mixtures & Solutions" },
  { front: "What is a chemical change?", back: "A change in chemical composition and properties, not easily reversible", unit: "Mixtures & Solutions" },

]



//
//          // Actual code starts beyond this point.
//





let currentIndex = 0;
let isFlipped = false;
let monkey = 0;
let cardText = document.getElementById('card-text');
let usedFlashcards = [];
let unitSelected = 1;
// setting flashcards initially to unit 1;
flashcards = flashcardsunit1;

//counter stuff yet again
let flashcardcounter = document.getElementById("flashcardcounter");
flashcardcounter.textContent = usedFlashcards.length;

let dog = document.getElementById("flashcardsleft");
dog.textContent = flashcards.length - usedFlashcards.length;

let buttonsound = document.getElementById("buttonclicked");
buttonsound.volume = 0.15;

function showFront() {
  cardText.textContent = flashcards[currentIndex].front;
  cardText.classList.add('frontside');
}

function flipCard() {
  buttonsound.currentTime = 0;
  buttonsound.play();
  isFlipped = !isFlipped;
  cardText.textContent = isFlipped
    ? flashcards[currentIndex].back
    : flashcards[currentIndex].front;

  if (isFlipped) {
    cardText.classList.add('backside');
    cardText.classList.remove('frontside');
  } else {
    cardText.classList.remove('backside');
    cardText.classList.add('frontside');
  }
}

function nextCard() {
  buttonsound.currentTime = 0;
  buttonsound.play();
  if(cardText.classList.contains('backside')){
    cardText.classList.remove('backside')
  }
  var numberFound = false;
  var previousIndex = currentIndex;

  // this is for the counters
  flashcardcounter.textContent = usedFlashcards.length;
  dog.textContent = flashcards.length;


  // check if all flashcards have been used
  if(usedFlashcards.length === flashcards.length){
    flashcardcounter.classList.remove('settle');
    void flashcardcounter.offsetWidth; // Force reflow (resets the animation)
    usedFlashcards = [];
    emptysound = document.getElementById("emptysound");
    emptysound.play();
    flashcardcounter.classList.add('completed-set');
    flashcardcounter.classList.add('settle');
  } else {
    flashcardcounter.classList.remove('completed-set');
  }

  // entering decision loop
  while (numberFound == false){
    currentIndex = Math.floor(Math.random() * flashcards.length);
    if (currentIndex == previousIndex){ // checks if card is same as previous one
      console.log('ruhroh');
    } else {
      if (usedFlashcards.includes(currentIndex)){ // checks if card has already been used
        ('double ruhroh');
      } else {
        //appending Used Flashcard if both tests pass :)
        usedFlashcards.push(currentIndex);
        numberFound = true;
      }
    }
  }
  
  // (currentIndex + random.number????) make a shuffle mechanic this way? built in?
  // then again, flashcards should be based on what units you want to test, right?
  isFlipped = false;
  showFront();
}



function shuffleFlashcards(){
  cardText.classList.remove('settle');
  void cardText.offsetWidth; // Force reflow (resets the animation)
  const shuffleSounds = [
    new Audio('../sounds/shufflesound1.wav'),
    new Audio('../sounds/shufflesound2.wav')
  ];

  // Function to play a random shuffle sound
  const randomIndex = Math.floor(Math.random() * shuffleSounds.length);
  shuffle = shuffleSounds[randomIndex]
  shuffle.volume = 0.2;
  shuffle.play();
  cardText.classList.add('settle');

  usedFlashcards = [];
  nextCard();
}

function unitSelect(){
  let selectionwindow = document.getElementById("selectionwindow")
  selectionwindow.classList.remove("hidden");
}


// make a unit select button


showFront(); // Load first card on page load



//////////////////////////////////////////////////
////////CHOOSE UNIT BUTTONS//////////////////////
/////////////////////////////////////////////////


// Declaring and getting buttons
let unit1 = document.getElementById("flashcardunit1button");
let unit2 = document.getElementById("flashcardunit2button");
let unit3 = document.getElementById("flashcardunit3button");
let unit4 = document.getElementById("flashcardunit4button");
let unit5 = document.getElementById("flashcardunit5button");
let unit6 = document.getElementById("flashcardunit6button");
let unit7 = document.getElementById("flashcardunit7button");
let unit8 = document.getElementById("flashcardunit8button");


// Adding click events
// PLEASE NOTE: This is an incredibly shodty way of applying the "clicked" CSS style. But as far as I can tell, no latency, so who gives a rat's ass.

unit1.addEventListener("click", () => {
  // selecting unit
  unitSelected = 1;
  flashcards = flashcardsunit1;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit1.classList.add("clicked");
  shuffleFlashcards();
});

unit2.addEventListener("click", () => {
  // selecting unit
  unitSelected = 2;
  flashcards = flashcardsunit2;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit2.classList.add("clicked");
  shuffleFlashcards();
});


unit3.addEventListener("click", () => {
  // selecting unit
  unitSelected = 3;
  flashcards = flashcardsunit3;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit3.classList.add("clicked");
  shuffleFlashcards();
});


unit4.addEventListener("click", () => {
  // selecting unit
  unitSelected = 4;
  flashcards = flashcardsunit4;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit4.classList.add("clicked");
  shuffleFlashcards();
});

unit5.addEventListener("click", () => {
  // selecting unit
  unitSelected = 5;
  flashcards = flashcardsunit5;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit5.classList.add("clicked");
  shuffleFlashcards();
});

unit6.addEventListener("click", () => {
  // selecting unit
  unitSelected = 6;
  flashcards = flashcardsunit6;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit6.classList.add("clicked");
  shuffleFlashcards();
});

unit7.addEventListener("click", () => {
  // selecting unit
  unitSelected = 7;
  flashcards = flashcardsunit7;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit7.classList.add("clicked");
  shuffleFlashcards();
});

unit8.addEventListener("click", () => {
  // selecting unit
  unitSelected = 8;
  flashcards = flashcardsunit8;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  unit5.classList.remove("clicked");
  unit6.classList.remove("clicked");
  unit7.classList.remove("clicked");
  unit8.classList.remove("clicked");
  console.log(unitSelected);
  unit8.classList.add("clicked");
  shuffleFlashcards();
});
showFront(); // Load first card on page load