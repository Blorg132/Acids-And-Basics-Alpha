//////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////BEFORE YOU ADD TO THIS FILE////////////////////////////////////////////////////// /
////////////////////////PLEASE CTRL + K, CTRL + 0 TO CLOSE ALL OF THIS SHIT ///////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////


// KMT UNIT ///////////////////////////////////////////////////////////////////////////////////////
const flashcardsunit1 = [
  { "front": "What does the Kinetic Molecular Theory explain?", "back": "The behavior of particles in gases", "unit": "6" },
  { "front": "According to KMT, how are gas particles in motion?", "back": "They are in constant, random motion", "unit": "6" },
  { "front": "What does KMT assume about the size of gas particles?", "back": "They are so small compared to the space between them that their own volume is negligible", "unit": "6" },
  { "front": "What type of collisions do gas particles have according to KMT?", "back": "Elastic collisions (no energy is lost)", "unit": "6" },
  { "front": "What does KMT say about the forces between gas particles?", "back": "There are no attractive or repulsive forces between them", "unit": "6" },
  { "front": "According to KMT, what determines the temperature of a gas?", "back": "The average kinetic energy of its particles", "unit": "6" },
  { "front": "What happens to particle speed when temperature increases?", "back": "Particle speed increases", "unit": "6" },
  { "front": "What happens to particle speed when temperature decreases?", "back": "Particle speed decreases", "unit": "6" },
  { "front": "According to KMT, why do gases fill their containers?", "back": "Particles move freely and spread out to fill the available space", "unit": "6" },
  { "front": "In KMT, what does 'elastic collision' mean?", "back": "Particles bounce off each other without losing total kinetic energy", "unit": "6" },
  { "front": "How does KMT explain gas pressure?", "back": "Gas particles colliding with the walls of the container", "unit": "6" },
  { "front": "If temperature doubles, what happens to the average kinetic energy?", "back": "It doubles", "unit": "6" },
  { "front": "How does KMT explain diffusion in gases?", "back": "Particles move randomly and spread out evenly over time", "unit": "6" },
  { "front": "What is effusion according to KMT?", "back": "Gas particles passing through a tiny hole without collisions", "unit": "6" },
  { "front": "How does particle mass affect speed in KMT?", "back": "Lighter particles move faster at the same temperature", "unit": "6" },
  { "front": "What does KMT say about the motion of particles in a vacuum?", "back": "They move in straight lines until they collide", "unit": "6" },
  { "front": "What happens to particle motion if volume is reduced?", "back": "Collisions with container walls become more frequent, increasing pressure", "unit": "6" },
  { "front": "How does KMT relate temperature to pressure?", "back": "Higher temperature → faster particles → more collisions → higher pressure", "unit": "6" },
  { "front": "Why do gases have low density according to KMT?", "back": "Particles are far apart compared to their size", "unit": "6" },
  { "front": "What is the relationship between kinetic energy and absolute temperature?", "back": "They are directly proportional", "unit": "6" },
  { "front": "What does KMT assume about the duration of collisions?", "back": "Collisions are instantaneous", "unit": "6" },
  { "front": "Why are real gases not ideal?", "back": "Real gases have intermolecular forces and particles with actual volume", "unit": "6" },
  { "front": "Under what conditions do gases behave most ideally?", "back": "High temperature and low pressure", "unit": "6" },
  { "front": "How does KMT explain Boyle's Law?", "back": "Reducing volume increases collision frequency, raising pressure", "unit": "6" },
  { "front": "How does KMT explain Charles's Law?", "back": "Increasing temperature increases speed, causing expansion", "unit": "6" },
  { "front": "How does KMT explain Gay-Lussac's Law?", "back": "Higher temperature increases collision force, raising pressure", "unit": "6" },
  { "front": "According to KMT, what happens when gas particles collide with each other?", "back": "They bounce off in new directions without losing total energy", "unit": "6" },
  { "front": "What happens to the motion of gas particles as they approach absolute zero?", "back": "They slow down and approach no motion", "unit": "6" },
  { "front": "How does KMT describe gas particle paths between collisions?", "back": "They travel in straight lines", "unit": "6" },
  { "front": "How does KMT explain that gases mix evenly?", "back": "Random motion causes particles to intermix until evenly distributed", "unit": "6" }
]
///////////////////////////////////////////////////////////////////////////////////

const flashcardsunit2 = [  
  // Unit 2: Periodic Table
  { front: "Who created the periodic table?", back: "Dmitri Mendeleev", unit: "2" },
  { front: "What does a group (column) in the periodic table show?", back: "Elements with similar properties", unit: "2" },
  { front: "What does a period (row) in the periodic table show?", back: "Same number of electron shells", unit: "2" },
  { front: "What are Group 1 elements called?", back: "Alkali metals", unit: "2" },
  { front: "What are Group 17 elements called?", back: "Halogens", unit: "2" },
  { front: "What are Group 18 elements called?", back: "Noble gases", unit: "2" },
  { front: "Are metals on the left or right of the periodic table?", back: "Left", unit: "2" },
  { front: "Are nonmetals on the left or right of the periodic table?", back: "Right", unit: "2" },
  { front: "What element has atomic number 1?", back: "Hydrogen", unit: "2" },
  { front: "Which metal is liquid at room temperature?", back: "Mercury", unit: "2" },

]

const flashcardsunit3 = [
    // Unit 3: Chemical Bonding
  { front: "What is an ionic bond?", back: "Transfer of electrons between atoms", unit: "3" },
  { front: "What is a covalent bond?", back: "Sharing of electrons between atoms", unit: "3" },
  { front: "What types of elements form ionic bonds?", back: "Metals and nonmetals", unit: "3" },
  { front: "What types of elements form covalent bonds?", back: "Nonmetals and nonmetals", unit: "3" },
  { front: "What is a molecule?", back: "A group of atoms bonded together", unit: "3" },
  { front: "What is a compound?", back: "A substance made of different elements bonded together", unit: "3" },
  { front: "What is the chemical formula for water?", back: "H₂O", unit: "3" },
  { front: "What is the chemical formula for table salt?", back: "NaCl", unit: "3" },
  { front: "Why do atoms form bonds?", back: "To become more stable", unit: "3" },
  { front: "What is a valence electron?", back: "An electron in the outermost shell", unit: "3" },

]

const flashcardsunit4 = [
    // Unit 4: Chemical Reactions
  { front: "What is a chemical reaction?", back: "A process that changes substances into new ones", unit: "4" },
  { front: "What are the signs of a chemical reaction?", back: "Color change, gas, temperature change, precipitate", unit: "4" },
  { front: "What is a reactant?", back: "A substance that starts a chemical reaction", unit: "4" },
  { front: "What is a product?", back: "A substance formed in a chemical reaction", unit: "4" },
  { front: "What is the law of conservation of mass?", back: "Mass is not created or destroyed in a reaction", unit: "4" },
  { front: "What is an exothermic reaction?", back: "A reaction that releases heat", unit: "4" },
  { front: "What is an endothermic reaction?", back: "A reaction that absorbs heat", unit: "4" },
  { front: "What is a balanced equation?", back: "Same number of atoms on both sides of the equation", unit: "4" },
  { front: "What is a catalyst?", back: "A substance that speeds up a reaction without being used up", unit: "4" },
  { front: "What is a chemical equation?", back: "A symbolic representation of a chemical reaction", unit: "4" },
]


const flashcardsunit5 = [
    // Unit 5: States of Matter
  { front: "What are the three main states of matter?", back: "Solid, liquid, and gas", unit: "5" },
  { front: "What state of matter has a fixed shape and volume?", back: "Solid", unit: "5" },
  { front: "What state of matter has a fixed volume but no fixed shape?", back: "Liquid", unit: "5" },
  { front: "What state of matter has no fixed shape or volume?", back: "Gas", unit: "5" },
  { front: "What is the process of solid to liquid called?", back: "Melting", unit: "5" },
  { front: "What is the process of liquid to gas called?", back: "Evaporation", unit: "5" },
  { front: "What is the process of gas to liquid called?", back: "Condensation", unit: "5" },
  { front: "What is the process of liquid to solid called?", back: "Freezing", unit: "5" },
  { front: "What is the process of solid to gas called?", back: "Sublimation", unit: "5" },
  { front: "What causes changes in states of matter?", back: "Adding or removing heat", unit: "5" }
]

//
//          // Actual code starts beyond this point.
//





let currentIndex = 0;
let isFlipped = false;
let monkey = 0;
let cardText = document.getElementById('card-text');
let usedFlashcards = [];
let unitSelected = 1;
// setting flashcards initially to unit 1;
flashcards = flashcardsunit1;

//counter stuff yet again
let flashcardcounter = document.getElementById("flashcardcounter");
flashcardcounter.textContent = usedFlashcards.length;

let dog = document.getElementById("flashcardsleft");
dog.textContent = flashcards.length - usedFlashcards.length;

let buttonsound = document.getElementById("buttonclicked");
buttonsound.volume = 0.15;

function showFront() {
  cardText.textContent = flashcards[currentIndex].front;
  cardText.classList.add('frontside');
}

function flipCard() {
  buttonsound.currentTime = 0;
  buttonsound.play();
  isFlipped = !isFlipped;
  cardText.textContent = isFlipped
    ? flashcards[currentIndex].back
    : flashcards[currentIndex].front;

  if (isFlipped) {
    cardText.classList.add('backside');
    cardText.classList.remove('frontside');
  } else {
    cardText.classList.remove('backside');
    cardText.classList.add('frontside');
  }
}

function nextCard() {
  buttonsound.currentTime = 0;
  buttonsound.play();
  if(cardText.classList.contains('backside')){
    cardText.classList.remove('backside')
  }
  var numberFound = false;
  var previousIndex = currentIndex;

  // this is for the counters
  flashcardcounter.textContent = usedFlashcards.length;
  dog.textContent = flashcards.length;


  // check if all flashcards have been used
  if(usedFlashcards.length === flashcards.length){
    flashcardcounter.classList.remove('settle');
    void flashcardcounter.offsetWidth; // Force reflow (resets the animation)
    usedFlashcards = [];
    emptysound = document.getElementById("emptysound");
    emptysound.play();
    flashcardcounter.classList.add('completed-set');
    flashcardcounter.classList.add('settle');
  } else {
    flashcardcounter.classList.remove('completed-set');
  }

  // entering decision loop
  while (numberFound == false){
    currentIndex = Math.floor(Math.random() * flashcards.length);
    if (currentIndex == previousIndex){ // checks if card is same as previous one
      console.log('ruhroh');
    } else {
      if (usedFlashcards.includes(currentIndex)){ // checks if card has already been used
        ('double ruhroh');
      } else {
        //appending Used Flashcard if both tests pass :)
        usedFlashcards.push(currentIndex);
        numberFound = true;
      }
    }
  }
  
  // (currentIndex + random.number????) make a shuffle mechanic this way? built in?
  // then again, flashcards should be based on what units you want to test, right?
  isFlipped = false;
  showFront();
}



function shuffleFlashcards(){
  cardText.classList.remove('settle');
  void cardText.offsetWidth; // Force reflow (resets the animation)
  const shuffleSounds = [
    new Audio('../sounds/shufflesound1.wav'),
    new Audio('../sounds/shufflesound2.wav')
  ];

  // Function to play a random shuffle sound
  const randomIndex = Math.floor(Math.random() * shuffleSounds.length);
  shuffle = shuffleSounds[randomIndex]
  shuffle.volume = 0.2;
  shuffle.play();
  cardText.classList.add('settle');

  usedFlashcards = [];
  nextCard();
}

function unitSelect(){
  let selectionwindow = document.getElementById("selectionwindow")
  selectionwindow.classList.remove("hidden");
}


// make a unit select button


showFront(); // Load first card on page load



//////////////////////////////////////////////////
////////CHOOSE UNIT BUTTONS//////////////////////
/////////////////////////////////////////////////


// Declaring and getting buttons
let unit1 = document.getElementById("flashcardunit1button");
let unit2 = document.getElementById("flashcardunit2button");
let unit3 = document.getElementById("flashcardunit3button");
let unit4 = document.getElementById("flashcardunit4button");


// Adding click events
// PLEASE NOTE: This is an incredibly shitty way of applying the "clicked" CSS style. But as far as I can tell, no latency, so who gives a rat's ass.

unit1.addEventListener("click", () => {
  // selecting unit
  unitSelected = 1;
  flashcards = flashcardsunit1;
  // getting rid of clicked css style on everything else
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  console.log(unitSelected);
  unit1.classList.add("clicked");
  shuffleFlashcards();
});

unit2.addEventListener("click", () => {
  // selecting unit
  unitSelected = 2;
  flashcards = flashcardsunit2;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit3.classList.remove("clicked");
  unit4.classList.remove("clicked");
  console.log(unitSelected);
  unit2.classList.add("clicked");
  shuffleFlashcards();
});


unit3.addEventListener("click", () => {
  // selecting unit
  unitSelected = 3;
  flashcards = flashcardsunit3;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit4.classList.remove("clicked");
  console.log(unitSelected);
  unit3.classList.add("clicked");
  shuffleFlashcards();
});


unit4.addEventListener("click", () => {
  // selecting unit
  unitSelected = 4;
  flashcards = flashcardsunit4;
  // getting rid of clicked css style on everything else
  unit1.classList.remove("clicked");
  unit2.classList.remove("clicked");
  unit3.classList.remove("clicked");
  console.log(unitSelected);
  unit4.classList.add("clicked");
  shuffleFlashcards();
});
showFront(); // Load first card on page load