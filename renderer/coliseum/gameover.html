<!DOCTYPE html>



<html>

    <head>

        <link rel="stylesheet" href="../styles.css">
        <audio id="music" src="../sounds/gameovertheme.mp3" autoplay></audio>
        <style>
            .bg-layer {
                background-image: url('../images/coliseumgameover.webp');
                background-size: 100% 140%;
                background-position: center;
                position: absolute;
                inset: 0;
                opacity: 1.0;
                z-index: -100;
            }


            .bg-layer-champion {
                background-image: url('../images/championending.webp');
                background-size: 100% 100%;
                background-position: center;
                position: absolute;
                inset: 0;
                opacity: 0.3;
                z-index: -100;
            }

        </style>


    </head>



    <body id="body">
        <div class="bg-layer" id="background"></div>
        <h1 style="color: rgb(255, 0, 0); font-size: 10vw; font-family: Quantico;" id="gameover">GAME OVER</h1>
        <aside id="coliseumbeakersearned" style="color:rgb(255, 255, 255); font-family: Fancy; font-size: 3.5vw; text-align: center;">asdf</aside>
        <aside id="questionsanswered" style="color:rgb(255, 255, 255); font-family: Fancy; font-size: 2.5vw; text-align: center;">asdf</aside>








        <button class="back-button" onclick="window.location.href='../mainpage.html';">Leave</button>
    </body>


    <script>
        const { ipcRenderer } = require('electron'); // make sure ipcRenderer is available

        const inventoryPath = 'inventory.json'; // same as in your game

        async function initGameOver() {
            try {
                // Read inventory data asynchronously
                const data = await ipcRenderer.invoke('read-json', inventoryPath, {
                    beakers: 0,
                    coliseumbeakersearned: 0,
                    questionsanswered: 0,
                    championending: false
                });

                const coliseumbeakersearned = document.getElementById("coliseumbeakersearned");
                const questionsanswered = document.getElementById("questionsanswered");
                const background = document.getElementById("background");
                const gameover = document.getElementById("gameover");
                const body = document.getElementById("body");
                const music = document.getElementById("music");

                // Champion ending visuals
                if (data.championending) {
                    music.src = "../sounds/congratssong.mp3";
                    background.classList.remove("bg-layer");
                    background.classList.add("bg-layer-champion");
                    body.style.backgroundColor = "rgba(47, 71, 26, 0.603)";
                    gameover.textContent = "VICTORIOUS";
                    gameover.style.color = "rgb(136, 212, 49)";
                }

                // Beakers display
                coliseumbeakersearned.textContent = data.coliseumbeakersearned > 0 ? 
                    `Beakers Won: ${data.coliseumbeakersearned}` : "...you won nothing.";
                coliseumbeakersearned.style.color = data.coliseumbeakersearned > 0 ? "rgb(124, 212, 24)" : "white";

                // Questions answered display
                questionsanswered.textContent = data.questionsanswered > 0 ?
                    `Questions Answered: ${data.questionsanswered}` : "...and did nothing.";
                questionsanswered.style.color = "white";

            } catch (error) {
                console.error("Error loading Game Over data:", error);
            }
        }

        // Initialize when page loads
        initGameOver();
    </script>

</html>